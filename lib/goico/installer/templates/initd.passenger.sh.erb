#!/bin/sh
# <%= manifest["app_name"] %> Passenger init script
APP_PATH="<%= app_path %>"
USER="<%= app_user %>"
PID_FILE="$APP_PATH/tmp/pids/passenger.pid"

start() {
  echo "Starting Passenger..."
  start-stop-daemon --start --chuid $USER --background --exec /usr/bin/passenger start -- -p 3000 -d --environment production --pid-file $PID_FILE
}

stop() {
  echo "Stopping Passenger..."
  start-stop-daemon --stop --pidfile $PID_FILE
}

case "$1" in
  start) start ;;
  stop) stop ;;
  restart) stop; start ;;
  *) echo "Usage: $0 {start|stop|restart}" ;;
esac

exit 0
