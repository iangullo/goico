#!/bin/sh
# <%= manifest["app_name"] %> Rails worker init script

APP_PATH="<%= app_path %>"
USER="<%= app_user %>"
PID_FILE="$APP_PATH/tmp/pids/worker.pid"

start() {
  start-stop-daemon --start --chuid $USER --background --exec $APP_PATH/bin/rails -- jobs:work
}

stop() {
  start-stop-daemon --stop --pidfile $PID_FILE
}

case "$1" in
  start) start ;;
  stop) stop ;;
  restart) stop; start ;;
  *) echo "Usage: $0 {start|stop|restart}" ;;
esac

exit 0
